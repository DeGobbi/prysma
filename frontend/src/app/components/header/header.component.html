<nav class="header">

  <!-- ESQUERDA -->
  <div class="header-left">
    <a routerLink="/" class="logo">PRYSMA</a>
  </div>

  <!-- CENTRO -->
  <div class="header-center">
    <div class="search-box">
      <input
        type="text"
        placeholder="Buscar produtos..."
        [(ngModel)]="searchQuery"
        (keyup.enter)="buscar()"
      />
      <button (click)="buscar()" class="search-btn">ğŸ”</button>
    </div>
  </div>

  <!-- DIREITA -->
  <div class="header-right">

    <!-- SE ESTIVER LOGADO -->
    <ng-container *ngIf="usuarioService.usuario$ | async as usuario; else guest">

      <!-- CARRINHO -->
      <button class="cart-btn" routerLink="/carrinho">
        ğŸ›’
      </button>

      <!-- DROPDOWN DO USUÃRIO -->
      <div class="user-dropdown"
           (mouseenter)="userDropdownAtivo = true"
           (mouseleave)="userDropdownAtivo = false">

        <!-- BotÃ£o principal (foto + nome) -->
        <div class="user-info">
          <!-- <img class="user-photo"
               [src]="usuario.fotoUrl || 'assets/default-user.png'"
               alt="Foto do usuÃ¡rio"> -->

          <span class="user-name">{{ usuario.nome }}</span>
        </div>

        <!-- MENU -->
        <div *ngIf="userDropdownAtivo" class="user-menu">

          <a routerLink="/perfil">Perfil</a>

          <a *ngIf="usuario.admin" routerLink="/admin">Painel Admin</a>

          <a (click)="logout()">Sair</a>
        </div>

      </div>

    </ng-container>

    <!-- SE NÃƒO ESTIVER LOGADO -->
    <ng-template #guest>

      <div class="login-dropdown" [class.open]="isLoginOpen">
        <button class="login-btn"
                (click)="toggleLoginDropdown($event)"
                aria-haspopup="true"
                [attr.aria-expanded]="isLoginOpen">
          Entrar â–¾
        </button>

        <div class="dropdown-menu" *ngIf="isLoginOpen" role="menu">
          <a routerLink="/login" (click)="closeLoginDropdown()">Login</a>
          <a routerLink="/cadastrar" (click)="closeLoginDropdown()">Cadastro</a>
        </div>
      </div>

      <button routerLink="/carrinho" class="cart-btn">ğŸ›’</button>

    </ng-template>

  </div>
</nav>